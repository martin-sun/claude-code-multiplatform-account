# ============================================
# Claude Code - Kimi K2 Configuration
# ============================================
# This file extends the base configuration with Kimi-specific settings

version: '3.8'

services:
  claude:
    extends:
      file: ../docker-compose.base.yml
      service: x-claude-base

    container_name: claude-kimi

    # Kimi-specific entrypoint
    entrypoint: /usr/local/bin/setup-kimi.sh

    # Volumes: claude data + workspace
    volumes:
      - ./claude-data:/home/claude/.claude
      - ${WORKSPACE_PATH:-../../beancount-LLM/Beancount-LLM}:/workspace

    # Kimi-specific environment variables
    environment:
      - HOME=/home/claude
      - CLAUDE_CONFIG_DIR=/home/claude/.claude
      - CLAUDE_SKIP_ONBOARDING=true
      - CLAUDE_CONFIG_FILE=/home/claude/.claude/settings.json
      - AUTO_UPDATE_CLAUDE=${AUTO_UPDATE_CLAUDE:-false}
      # Kimi K2 API key
      - KIMI_API_KEY=${KIMI_API_KEY:-}
